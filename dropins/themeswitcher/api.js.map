{"version":3,"file":"api.js","sources":["/dropin-template/src/api/initialize/initialize.ts","/dropin-template/src/api/fetch-graphql/fetch-graphql.ts","/dropin-template/src/api/themeApi/themeApi.ts"],"sourcesContent":["import { Initializer } from '@adobe-commerce/elsie/lib';\nimport { Lang } from '@adobe-commerce/elsie/i18n';\n// import { events } from '@adobe-commerce/event-bus';\n\ntype ConfigProps = {\n  langDefinitions?: Lang;\n};\n\nexport const initialize = new Initializer<ConfigProps>({\n  init: async (config) => {\n    const defaultConfig = {};\n\n    initialize.config.setConfig({ ...defaultConfig, ...config });\n  },\n\n  listeners: () => [\n    // events.on('authenticated', (authenticated) => {\n    //   console.log('authenticated', authenticated);\n    // }),\n  ],\n});\n\nexport const config = initialize.config;\n","import { FetchGraphQL } from '@adobe-commerce/fetch-graphql';\n\nexport const {\n  setEndpoint,\n  setFetchGraphQlHeader,\n  removeFetchGraphQlHeader,\n  setFetchGraphQlHeaders,\n  fetchGraphQl,\n  getConfig,\n} = new FetchGraphQL().getMethods();\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this \n * file in accordance with the terms of the Adobe license agreement \n * accompanying it. \n *******************************************************************/\n\nexport type Theme = 'light' | 'dark' | 'auto';\n\nexport interface ThemeState {\n  currentTheme: Theme;\n  isDark: boolean;\n}\n\nlet currentTheme: Theme = 'auto';\n\n// Get the current theme\nexport const getCurrentTheme = (): Theme => currentTheme;\n\n// Check if current theme is dark\nexport const isDarkTheme = (): boolean => {\n  if (currentTheme === 'auto') {\n    return window.matchMedia('(prefers-color-scheme: dark)').matches;\n  }\n  return currentTheme === 'dark';\n};\n\n// Set theme and apply to document\nexport const setTheme = (theme: Theme): void => {\n  currentTheme = theme;\n  \n  let shouldBeDark: boolean;\n  \n  if (theme === 'auto') {\n    shouldBeDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n  } else {\n    shouldBeDark = theme === 'dark';\n  }\n  \n  document.documentElement.setAttribute('data-theme', shouldBeDark ? 'dark' : 'light');\n  localStorage.setItem('theme', theme);\n  \n  // Dispatch custom event for theme change\n  window.dispatchEvent(new CustomEvent('themeChanged', {\n    detail: { theme, isDark: shouldBeDark }\n  }));\n};\n\n// Toggle between light and dark (ignores auto)\nexport const toggleTheme = (): void => {\n  const newTheme = isDarkTheme() ? 'light' : 'dark';\n  setTheme(newTheme);\n};\n\n// Initialize theme from localStorage or system preference\nexport const initializeTheme = (): void => {\n  const savedTheme = localStorage.getItem('theme') as Theme;\n  \n  if (savedTheme && ['light', 'dark', 'auto'].includes(savedTheme)) {\n    setTheme(savedTheme);\n  } else {\n    setTheme('auto');\n  }\n  \n  // Listen for system theme changes when in auto mode\n  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {\n    if (currentTheme === 'auto') {\n      setTheme('auto'); // Re-apply auto theme\n    }\n  });\n};\n\n// Get current theme state\nexport const getThemeState = (): ThemeState => ({\n  currentTheme,\n  isDark: isDarkTheme()\n});\n\nexport const themeApi = () => { \n  return {\n    getCurrentTheme,\n    isDarkTheme,\n    setTheme,\n    toggleTheme,\n    initializeTheme,\n    getThemeState\n  };\n};\n"],"names":["initialize","Initializer","config","defaultConfig","setEndpoint","setFetchGraphQlHeader","removeFetchGraphQlHeader","setFetchGraphQlHeaders","fetchGraphQl","getConfig","FetchGraphQL","currentTheme","getCurrentTheme","isDarkTheme","setTheme","theme","shouldBeDark","toggleTheme","newTheme","initializeTheme","savedTheme","getThemeState","themeApi"],"mappings":"mHAQO,MAAMA,EAAa,IAAIC,EAAyB,CACrD,KAAM,MAAOC,GAAW,CACtB,MAAMC,EAAgB,CAAA,EAEtBH,EAAW,OAAO,UAAU,CAAE,GAAGG,EAAe,GAAGD,EAAQ,CAC7D,EAEA,UAAW,IAAM,CAAA,CAKnB,CAAC,EAEYA,EAASF,EAAW,OCpBpB,CACX,YAAAI,EACA,sBAAAC,EACA,yBAAAC,EACA,uBAAAC,EACA,aAAAC,EACA,UAAAC,CACF,EAAI,IAAIC,EAAA,EAAe,WAAA,ECOvB,IAAIC,EAAsB,OAGnB,MAAMC,EAAkB,IAAaD,EAG/BE,EAAc,IACrBF,IAAiB,OACZ,OAAO,WAAW,8BAA8B,EAAE,QAEpDA,IAAiB,OAIbG,EAAYC,GAAuB,CAC9CJ,EAAeI,EAEf,IAAIC,EAEAD,IAAU,OACZC,EAAe,OAAO,WAAW,8BAA8B,EAAE,QAEjEA,EAAeD,IAAU,OAG3B,SAAS,gBAAgB,aAAa,aAAcC,EAAe,OAAS,OAAO,EACnF,aAAa,QAAQ,QAASD,CAAK,EAGnC,OAAO,cAAc,IAAI,YAAY,eAAgB,CACnD,OAAQ,CAAE,MAAAA,EAAO,OAAQC,CAAA,CAAa,CACvC,CAAC,CACJ,EAGaC,EAAc,IAAY,CACrC,MAAMC,EAAWL,IAAgB,QAAU,OAC3CC,EAASI,CAAQ,CACnB,EAGaC,EAAkB,IAAY,CACzC,MAAMC,EAAa,aAAa,QAAQ,OAAO,EAE3CA,GAAc,CAAC,QAAS,OAAQ,MAAM,EAAE,SAASA,CAAU,EAC7DN,EAASM,CAAU,EAEnBN,EAAS,MAAM,EAIjB,OAAO,WAAW,8BAA8B,EAAE,iBAAiB,SAAU,IAAM,CAC7EH,IAAiB,QACnBG,EAAS,MAAM,CAEnB,CAAC,CACH,EAGaO,EAAgB,KAAmB,CAC9C,aAAAV,EACA,OAAQE,EAAA,CACV,GAEaS,EAAW,KACf,CACL,gBAAAV,EACA,YAAAC,EACA,SAAAC,EACA,YAAAG,EACA,gBAAAE,EACA,cAAAE,CAAA"}